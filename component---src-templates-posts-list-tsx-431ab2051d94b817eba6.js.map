{"version":3,"file":"component---src-templates-posts-list-tsx-431ab2051d94b817eba6.js","mappings":"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","sources":["webpack://gatsby-starter-blog/./src/utils/url-builder.ts","webpack://gatsby-starter-blog/./src/utils/to-url-friendly-text.ts","webpack://gatsby-starter-blog/./src/utils/to-emoji.ts","webpack://gatsby-starter-blog/./src/templates/posts-list.tsx","webpack://gatsby-starter-blog/./src/utils/extract-category-from-slug.ts"],"sourcesContent":["import toUrlFriendlyText from \"./to-url-friendly-text\"\n\n/**\n * Builds URLs.\n */\nexport default class UrlBuilder {\n    /**\n     * Builds a URL to an index of posts of the given category.\n     * @param category Category.\n     * @returns URL.\n     */\n    createCategoryUrl(category: string): string {\n        const sanitized = this.removeBoundsSlashes(category)\n\n        return `/${sanitized}`\n    }\n\n    /**\n     * Builds a URL to an index of food reviews of the given food category.\n     * @param foodCategory Food category.\n     * @returns URL.\n     */\n    createFoodCategoryUrl(foodCategory: string): string {\n        const sanitized = this.removeBoundsSlashes(foodCategory)\n\n        return `/tipus-de-menjar/${sanitized}`\n    }\n\n    /**\n     * Builds a URL to an index of food reviews of restaurants located\n     * in the given neighbourhood.\n     * @param neighbourhood Neighbourhood.\n     * @returns URL.\n     */\n    createNeighbourhoodUrl(neighbourhood: string): string {\n        const sanitized = this.removeBoundsSlashes(neighbourhood)\n\n        return `/barri/${toUrlFriendlyText(sanitized)}`\n    }\n\n    private removeBoundsSlashes(chunk: string): string {\n        let output = chunk\n\n        if (output[0] === \"/\") {\n            output = output.slice(1)\n        }\n\n        if (output[output.length - 1] === \"/\") {\n            output = output.slice(0, -1)\n        }\n\n        return output\n    }\n}","export default function toUrlFriendlyText(text: string): string {\n    return text.normalize()\n        .toLowerCase()\n        .replace(/\\s/g, \"-\")\n}","const keywordToEmojiMap = new Map<string, string>([\n  [\"gastro\", \"üç¥\"],\n  [\"llengua\", \"üëÖ\"],\n  [\"llibres\", \"üìñ\"],\n  [\"software\", \"üë®üèª‚Äçüíª\"],\n\n  [\"burger\", \"üçî\"],\n  [\"esmorzar\", \"ü•ñ\"],\n  [\"ramen\", \"üçú\"],\n  [\"dol√ß\", \"üç∞\"],\n  [\"sa\", \"ü•¶\"],\n  [\"pizza\", \"üçï\"],\n  [\"valenci√†\", \"ü•ò\"],\n  [\"brunch\", \"ü•û\"]\n])\n\nexport default function toEmoji(keyword: string): string {\n  return keywordToEmojiMap.get(keyword) ?? keyword;\n}\n","import * as React from \"react\"\nimport { graphql, Link, PageProps } from \"gatsby\"\n\nimport Bio from \"../components/bio\"\nimport Seo from \"../components/seo\"\nimport Layout from \"../components/layout\"\nimport { Post } from \"../models/post\"\nimport extractCategoryFromSlug from \"../utils/extract-category-from-slug\"\nimport UrlBuilder from \"../utils/url-builder\"\nimport toEmoji from \"../utils/to-emoji\"\n\nconst urlBuilder = new UrlBuilder\n\nexport type DataProps = {\n  site: {\n    siteMetadata: {\n      title: string\n    }\n  }\n  allMarkdownRemark: {\n    nodes: Post[]\n  }\n}\n\ntype ContextProps = {\n  categoryFolder?: string\n  foodCategory?: string\n  neighbourhood?: string\n}\n\nconst PostsList: React.FC<PageProps<DataProps, ContextProps>> = ({ pageContext, data, location }) => {\n  const {\n    site: { siteMetadata },\n    allMarkdownRemark: { nodes: posts }\n  } = data\n\n  const siteTitle = siteMetadata?.title\n\n  if (!siteTitle) {\n    throw new Error(\"A title is mandatory for every post\")\n  }\n\n  const isFiltered = pageContext.categoryFolder\n    || pageContext.foodCategory\n    || pageContext.neighbourhood\n  const publishedPosts = process.env.GATSBY_DEBUG\n    ? posts\n    : posts.filter(post => !post.fields.slug.includes(\"/drafts/\"))\n\n\n  return (\n    <Layout location={location} title={siteTitle}>\n      <Bio />\n      {\n        isFiltered\n          ? <div id=\"filter-alert\">\n            <p>\n              ‚òùÔ∏è Estas filtrant per\n              {\" \"}\n              <strong>\n                {\n                  pageContext.categoryFolder\n                  && pageContext.categoryFolder.slice(1, -1)\n                  || pageContext.foodCategory\n                  || pageContext.neighbourhood\n                }\n              </strong>\n            </p>\n          </div>\n          : null\n      }\n      <ol style={{ listStyle: `none` }}>\n        {publishedPosts.map(({ frontmatter, fields, excerpt }) => {\n            const { slug } = fields\n            const {\n              title = slug,\n              foodCategory,\n              neighbourhood,\n              date,\n              description\n            } = frontmatter\n            const category = extractCategoryFromSlug(slug)\n\n            return (\n              <li key={slug}>\n                <article\n                  className=\"post-list-item\"\n                  itemScope\n                  itemType=\"http://schema.org/Article\"\n                >\n                  <header>\n                    {\n                      isFiltered\n                        ? null\n                        : <Link\n                          to={urlBuilder.createCategoryUrl(category)}\n                          className=\"filter category\">\n                          {toEmoji(category)}\n                        </Link>\n                    }\n                    {\n                      pageContext.foodCategory || !foodCategory\n                        ? null\n                        : <Link \n                          to={urlBuilder.createFoodCategoryUrl(foodCategory)}\n                          className=\"filter food-category\"\n                        >\n                          {toEmoji(foodCategory)}\n                        </Link>\n                    }\n                    {\n                      pageContext.neighbourhood || !neighbourhood\n                        ? null\n                        : <Link \n                          to={urlBuilder.createNeighbourhoodUrl(neighbourhood)}\n                          className=\"filter neighbourhood\">\n                          {neighbourhood}\n                        </Link>\n                    }\n                    <h2>\n                      <Link to={slug} itemProp=\"url\">\n                        <span itemProp=\"headline\">{title}</span>\n                      </Link>\n                    </h2>\n                    <small>{date}</small>\n                  </header>\n                  <section>\n                    <p\n                      dangerouslySetInnerHTML={{\n                        __html: description || excerpt,\n                      }}\n                      itemProp=\"description\"\n                    />\n                  </section>\n                </article>\n              </li>\n            )\n          })}\n      </ol>\n    </Layout>\n  )\n}\n\nexport default PostsList\n\nexport const Head = () => <Seo title=\"Tots els articles\" />\n\nexport const pageQuery = graphql`\n  query PostsList(\n    $categoryFolder: String\n    $foodCategory: String\n    $neighbourhood: String\n  ) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(\n      filter: { \n        fields: { slug: { regex: $categoryFolder } },\n        frontmatter: { \n          foodCategory: { eq: $foodCategory } \n          neighbourhood: { eq: $neighbourhood } \n        }\n      }, \n      sort: { frontmatter: { date: DESC } }\n    ) {\n      nodes {\n        excerpt\n        fields {\n          slug\n        }\n        frontmatter {\n          date(formatString: \"DD MMMM YYYY\", locale: \"ca\")\n          title\n          description\n          foodCategory\n          neighbourhood\n        }\n      }\n    }\n  }\n`","export default function extractCategoryFromSlug(slug: string): string {\n  return slug.split(\"/\")\n    .filter(Boolean)[0]\n}"],"names":["UrlBuilder","_proto","createCategoryUrl","category","this","removeBoundsSlashes","createFoodCategoryUrl","foodCategory","createNeighbourhoodUrl","neighbourhood","sanitized","normalize","toLowerCase","replace","chunk","output","slice","length","keywordToEmojiMap","Map","toEmoji","keyword","get","urlBuilder","_ref","pageContext","data","location","site","siteMetadata","allMarkdownRemark","nodes","posts","siteTitle","title","Error","isFiltered","categoryFolder","publishedPosts","process","GATSBY_DEBUG","filter","post","fields","slug","includes","React","Layout","Bio","id","style","listStyle","map","_ref2","frontmatter","excerpt","date","description","split","Boolean","extractCategoryFromSlug","key","className","itemScope","itemType","Link","to","itemProp","dangerouslySetInnerHTML","__html","Head","Seo"],"sourceRoot":""}